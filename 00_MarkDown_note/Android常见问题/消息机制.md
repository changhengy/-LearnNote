## 消息机制

**消息机制中有四个关键类，Handler、Message、Looper、MessageQueue**

Handler是用来辅助消息发送和处理的类，可通过复写handleMessage来处理 Message，通过post或postDelay来发送消息
Message是消息的载体，what属性是消息的标识，用int值来标记不同的消息类型，obj为消息中包含的信息，一般用于存放处理消息是要用到的数据；还有一些数组和数值的属性是一些便捷的存放数据的属性
MessageQueue是消息的队列，名字虽然是队列，但是MessageQueue是用单链表实现的，因为单链表在插入和删除上表现较好；MessageQueue使用先进先出的原则，按序取出消息
Looper是一个不断轮询MessageQueue的类，会不断取出MessageQueue中的消息；每一个线程中只能有一个Looper；主线程的Looper在线程创建的时候就自动创建并开始轮询了

**Looper的存放使用ThreadLocal实现，ThreadLocal用于创建一个线程的共享变量，当在一个已有Looper的线程中再次创建Looper，会拿到相同的Looper**
